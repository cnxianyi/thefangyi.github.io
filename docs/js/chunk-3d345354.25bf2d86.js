(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d345354"],{1906:function(t,r,e){"use strict";var o=e("7a23"),n={class:"right_nav"},a=Object(o["h"])("h1",null,[Object(o["h"])("a",null,[Object(o["h"])("i",{id:"top",class:"bx bx-arrow-to-top"})])],-1);function c(t,r,e,c,s,d){return Object(o["q"])(),Object(o["d"])("div",null,[Object(o["h"])("div",n,[Object(o["y"])(t.$slots,"default")]),s.top?(Object(o["q"])(),Object(o["d"])("div",{key:0,class:"icon",onClick:r[1]||(r[1]=function(){return d.goTop&&d.goTop.apply(d,arguments)})},[a])):Object(o["e"])("",!0)])}var s=e("2f14"),d={data:function(){return{height:0,scrollTop:0,top:!1}},methods:{watchScroll:function(){this.scrollTop=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,this.scrollTop>500?this.top=!0:this.top=!1},goTop:function(){this.scrollTop=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,this.scrollTop>1?(window.requestAnimationFrame(this.goTop),scrollTo(0,Math.floor(.85*this.scrollTop))):scrollTo(0,0),document.getElementById("top").className="bx bx-arrow-to-top bx-fade-up"}},mounted:function(){window.addEventListener("scroll",Object(s["a"])(this.watchScroll,500))},destroyed:function(){window.removeEventListener("scroll",this.watchScroll)}};e("416d");d.render=c;r["a"]=d},"416d":function(t,r,e){"use strict";e("d175")},d175:function(t,r,e){},ee5e:function(t,r,e){"use strict";e.r(r);var o=e("7a23"),n=Object(o["J"])("data-v-08cd94b1");Object(o["t"])("data-v-08cd94b1");var a=Object(o["g"])(" Axios Nodus "),c=Object(o["g"])(" 2021年8月21日21:53:25 "),s={class:"xy"},d={class:"content"},l=Object(o["h"])("h2",null,"axios",-1),i=Object(o["f"])("<h4 data-v-08cd94b1>响应拦截器</h4><small data-v-08cd94b1>在 xyshop 中，添加响应拦截器，用于对后端接口报错的错误信息进行整理。<br data-v-08cd94b1>对登录时接口返回的错误信息的处理</small><pre data-v-08cd94b1>export function ... {\r\n\r\ninstance.interceptors. <strong data-v-08cd94b1>1</strong> response.use( (response) =&gt; {\r\n        return response;\r\n    }, (error) =&gt; {\r\n        let err = <strong data-v-08cd94b1>2</strong> error.response.data.errors <strong data-v-08cd94b1>3</strong> [Object.keys(error.response.data.errors)[0]]\r\n        Toast(err[0]);\r\n        return Promise.reject(error);\r\n    });    \r\n\r\n            }</pre><ol data-v-08cd94b1><li data-v-08cd94b1>response ：请求的响应结果，在拦截器中对结果进行操作。</li><li data-v-08cd94b1>error.response.data.errors = 错误的请求返回的 响应结果 的数据中的错误信息 </li><li data-v-08cd94b1>obj[Object.keys(obj)[0]] 语法 ，在未知键的情况下访问当前对象的 &#39;第一个值&#39;</li></ol><hr data-v-08cd94b1><h4 data-v-08cd94b1>请求拦截器 / 登录操作</h4><small data-v-08cd94b1>在 xyshop 中，进行登录验证功能开发。 </small><pre data-v-08cd94b1><small data-v-08cd94b1>in request.js</small> \r\n     <strong data-v-08cd94b1>1</strong> instance.interceptors.request.use(function (config) {\r\n        const token = window.localStorage.getItem(&#39;token&#39;)\r\n        if (token) {\r\n             <strong data-v-08cd94b1>2</strong> config.headers.Authorization = &#39;Bearer &#39;+token;\r\n        }\r\n        return config;\r\n    }, function (error) {\r\n        return Promise.reject(error);\r\n    });\r\n    <hr data-v-08cd94b1>\r\n <small data-v-08cd94b1>in login.vue</small> \r\nlogin(state).then((result) =&gt; {\r\n        // 登录成功时 服务器会返回一个 授权 Token ，保存在本地 window.localStorage \r\n        window.localStorage.setItem(&#39;token&#39; , result.data.access_token)\r\n        Toast.success(&#39;登录成功&#39;)\r\n        setTimeout(() =&gt; {\r\n            router.go(-1)\r\n        }, 1000);\r\n    })\r\n<hr data-v-08cd94b1>\r\n <small data-v-08cd94b1>in  router/index.js</small>\r\n <strong data-v-08cd94b1>3</strong> router.beforeEach(((to , next) =&gt; {\r\n   <strong data-v-08cd94b1>4</strong> if (to.meta.isAuthRequired &amp;&amp; window.localStorage.getItem(&#39;token&#39;) === &#39;&#39;){\r\n    router.push(&#39;/user/login&#39;)\r\n  }\r\n...\r\n{\r\n    path: &#39;/cart&#39;,\r\n    name: &#39;cart&#39;,\r\n    component: cart,\r\n    meta: {\r\n      isAuthRequired: true\r\n    }\r\n  },</pre><ol data-v-08cd94b1><li data-v-08cd94b1>请求拦截器： 请求发送之前做些什么</li><li data-v-08cd94b1>xyshop JWT 认证，登录后得到 token , 需要添加到 请求头中。<br data-v-08cd94b1> getItem(&#39;...&#39;) 获取到保存的请求头， 将请求头添加到请求里。</li><li data-v-08cd94b1></li></ol>",9);Object(o["r"])();var b=n((function(t,r,e,b,u,p){var h=Object(o["z"])("nav-bar"),v=Object(o["z"])("sidebarR");return Object(o["q"])(),Object(o["d"])("div",null,[Object(o["h"])(h,null,{default:n((function(){return[a]})),time:n((function(){return[c]})),_:1}),Object(o["h"])("div",s,[Object(o["h"])("div",d,[l,Object(o["h"])(v),i])])])})),u=e("d968"),p=e("1906"),h={data:function(){return{}},components:{navBar:u["a"],sidebarR:p["a"]},methods:{GoSection:function(t){document.getElementById("".concat(t)).scrollIntoView({behavior:"smooth"})}}};h.render=b,h.__scopeId="data-v-08cd94b1";r["default"]=h}}]);
//# sourceMappingURL=chunk-3d345354.25bf2d86.js.map